<html> 
  <head>

    <link href='http://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet' type='text/css'>

    <script src="zepto.min.js" type="text/javascript"></script>
    <script src="branding.js" type="text/javascript"></script>
    <script src="monitoringWaffle.js" type="text/javascript"></script>
    <script src="tooltip.js" type="text/javascript"></script>
    <script src="alarmSidebar.js" type="text/javascript"></script>
    <script src="formHandler.js" type="text/javascript"></script>

    <link rel="stylesheet" type="text/css" href="scalarDashboard.css" />
  </head> 


  <body> 

    <!--Branding///////////////////////////////////////////////////////////-->
    <canvas id="banner"></canvas>

    <!--Buttons////////////////////////////////////////////////////////////-->
    <div id="navBar">
      <form action="demo.html" style='display:inline; position:relative; left:1%;'>
        <input type="submit" value="Dashboard">
      </form>
      <button type="button" style='position:relative; left:1%;'>Trigger</button>
      <button type="button" style='position:relative; left:1%;'>Monitoring</button>
      <button type="button" style='position:relative; left:1%;'>ELog</button>
      <p id="youAreHere" style='display: inline; color:rgba(0,0,0,0.2); font-size:24px; position:absolute; margin:0'></p>
    </div>

    <!--Waffleboard////////////////////////////////////////////////////////-->

    <div id="waffleplate">

      <!--Alarm Layer//////////////////////////////////////////////////////-->
      <div id='alarmLayer' style='float:left'>
        <canvas id="leftSidebar"></canvas>

        <div class='alarmDiv' id='voltAlarm'>
          <canvas id='alarmIconV', style='position:absolute; height:150px'></canvas>
          <p id='voltageText', style='color:white; margin-left:50px; margin-right:30px; position:relative; top:150px'>Swag whatever 8-bit, cliche lo-fi synth sriracha banksy wolf. Fixie skateboard tattooed helvetica DIY bushwick. Etsy semiotics ennui, bicycle rights selvage carles american apparel scenester narwhal ethnic fanny pack. Ethical direct trade kale chips keytar ennui, marfa leggings butcher beard stumptown put a bird on it fap messenger bag. Keffiyeh marfa brooklyn, quinoa leggings trust fund wolf gluten-free. Four loko farm-to-table mustache tumblr shoreditch, stumptown pickled. Narwhal blog fingerstache letterpress sartorial, godard odd future DIY farm-to-table semiotics four loko.</p>
        </div>

        <div class='alarmDiv' id='currentAlarm'>
          <canvas id='alarmIconI', style='position:absolute; height:150px'></canvas>
          <p id='currentText', style='color:white; margin-left:50px; margin-right:30px; position:relative; top:150px'>Magna tattooed sint ut occaecat locavore. Aesthetic voluptate gluten-free est. Wayfarers master cleanse VHS eiusmod minim brunch. Portland DIY eiusmod shoreditch veniam delectus. Narwhal exercitation assumenda excepteur, dolore nisi fap raw denim bushwick nulla dreamcatcher VHS aute sapiente. Whatever eiusmod synth, brunch ethnic banh mi fugiat non DIY flexitarian ea bespoke. Mollit gentrify VHS, truffaut cupidatat Austin stumptown fanny pack polaroid readymade echo park food truck deserunt gluten-free.</p>
        </div>

        <div class='alarmDiv' id='tempAlarm'>
          <canvas id='alarmIconT', style='position:absolute; height:150px'></canvas>
          <p id='temperatureText', style='color:white; margin-left:50px; margin-right:30px; position:relative; top:150px'>Trust fund fugiat est assumenda authentic before they sold out. Cupidatat trust fund echo park beard dolore skateboard, polaroid bicycle rights brunch kogi incididunt wolf ethical. Tattooed dolore brooklyn, magna mollit keffiyeh sartorial scenester esse eiusmod incididunt biodiesel adipisicing. Sartorial tattooed iphone tofu. Vegan art party 8-bit street art organic, you probably haven't heard of them  brooklyn. Pop-up vegan sapiente VHS vice quinoa. Commodo echo park whatever culpa.</p>
        </div>
      </div>

      <!---Waffles/////////////////////////////////////////////////////////-->
      <div id="mainframeLinks">
        <h1  style='display: inline; opacity: 0.3; margin-right: 20px; font-family: "Orbitron", sans-serif; font-size: 250%;'>GRIFFIN HV Mainframe 1</h1>
        <br><button type="button" style='display: inline;'>Mainframe 1</button>
        <button type="button" style='display: inline;'>Mainframe 2</button>
        <button type="button" style='display: inline;'>Mainframe 3</button>
      </div>
      <canvas id="TestWaffle"></canvas>

      <!--Input Layer//////////////////////////////////////////////////////-->
      <div align='left' id='InputLayer'>
        <canvas id='rightSidebar'></canvas>
        <h2 id='inputTitle' align='left' style='margin-left:50px'>sintitulo</h2>

        <form id='setValues'>
          <input type='radio' id='offButton' name='HVswitch' value='off' style='margin-left:60px; margin-bottom:10px'>Off
          <input type='radio' id='onButton' name='HVswitch' value='on' style='margin-left:10px; margin-bottom:10px'>On

          <p id='FieldText' style='margin-left:60px'>Demand Voltage [mV]</p>
          <input type="text" id="demandval" name='textbox' value='default' style='margin-bottom:10px; margin-left:60px'>

          <br><input type="button" value="Submit" style='margin-left:60px' onclick="javascript:updateParameter('InputLayer', 'single')">
          <input type="button" value="Cancel" onclick="javascript:abortUpdate('InputLayer', 'single')">
        </form>

        <canvas id='inputSpacer' height=5px width=200px style='margin-left:60px'></canvas>
        <script type="text/JavaScript">
          //style the input layer a bit:  TODO: factor out?
          var ILcanvas = document.getElementById('inputSpacer');
          var ILcontext = ILcanvas.getContext('2d');
          ILcontext.beginPath();
          ILcontext.moveTo(0,0);
          ILcontext.lineTo(200,0);
          ILcontext.stroke();
        </script>

        <form id='changeChannel'>
          <h4 style='margin-left:60px'>Change Channel:</h4>
          <p style='display:inline; margin-left:60px'>Channel</p><input type="text" id="newRow" name='newRow' style='margin-bottom:10px; margin-left:5px;'>
          <p style='display:inline; margin-left:60px'><br>Card</p><input type="text" id="newCol" name='newCol' style='margin-bottom:10px; margin-left:5px;'>
          <br><input type="button" value="Go To Channel" style='margin-left:60px' id='getChannelButton'>       
        </form>

      </div>

    </div>
  <!--End Waffleboard////////////////////////////////////////////////////-->

  <!--Tool tip layer/////////////////////////////////////////////////////-->
  <div id="TTcontainer">
    <div id="TT">
      <p id="TipText"></p>
    </div>
  </div>

  <script type="text/JavaScript">

      //Insert branding & navigation
      Banner('banner', 'youAreHere', 'navBar', 'GRIFFIN HV Mainframe 1');

      //value-free dummy variables to initialize Waffle with:  TODO: eliminate
      var alarmStatus;

      //set up wrapper div dimensions; minimum rendering width = 1200px:
      var renderWidth = Math.max(1200, window.innerWidth);
      $('#waffleplate').width(renderWidth);
      $('#waffleplate').height(window.innerHeight*0.9);

      //Waffle onclick event will throw x and y positions up to these globals, so that
      //updateParameter() can use them to determine which channel to update.  TODO: fix
      //without globals.
      window.griffinDialogX;
      window.griffinDialogY;

      //tool tip will throw its last known x and y positions up to global scope, so that
      //when the waffle refreshes, the tool tip can update without a mousemove event.
      //TODO: fix this without globals
      window.griffinToolTipX = 0;
      window.griffinToolTipY = 0;

      //cell labels; first entry decribes cell type (channel, card, crate, rack etc)
      var rowTitles = ['Ch.', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19'];
      var colTitles = ['Card', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19'];
      var ODBkeys = ['/Location/Of/demandVoltage', '/Location/Of/reportVoltage', '/Location/Of/reportCurrent', '/Location/Of/reportTemperature', '/Location/Of/ChannelOnOffState'];

      var moduleDivisions = [0,1,2,6,10,11,12,16,20];
      var moduleLabels = ['Module 0', 'Module 1', 'Module 2', 'Module 3', 'Module 4', 'Module 5', 'Module 6', 'Module 7'];

      //Voltage Waffle:
      Waffle(0,12,20, 'TestWaffle', 'single', [0.8,0.999,0.999], [1,1,1], alarmStatus, "Mainframe 1", ['leftSidebar', 'rightSidebar'], ['left', 'right'], "TT", "TTcontainer", "waffleplate", 'mV', rowTitles, colTitles, "InputLayer", [''], ['mV'], ODBkeys, ['voltAlarm', 'currentAlarm', 'tempAlarm'], ['alarmIconV', 'alarmIconI', 'alarmIconT'],  'mainframeLinks', moduleDivisions, moduleLabels);
  </script> 
  
  </body>
 
</html>
